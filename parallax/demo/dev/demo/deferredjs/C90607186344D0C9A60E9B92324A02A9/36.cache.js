function wrc(){}
function Arc(){}
function Drc(){}
function iLb(a,b){a._=b}
function dMb(a,b){a.i=b}
function kLb(a,b){a.hb=b}
function Zjc(a){this.b=a}
function Ujc(){F4b.call(this)}
function orc(){CEb.call(this,(rrc(),qrc))}
function fMb(){gMb.call(this,50,1,0.1,2000)}
function jrc(a){return a!=0?a<0?-1:1:0}
function rrc(){rrc=$Cc;qrc=new wrc}
function Frc(){Frc=$Cc;urc=new Arc}
function Grc(){Grc=$Cc;vrc=new Drc}
function O_b(a,b){return b.vf(a.c).xf(-a.b)}
function M_b(a,b){return N_b(a,b,W$b(U$b(new X$b,b)))}
function $1b(a,b){return a.d*b.d+a.e*b.e+a.c*b.c+a.b*b.b}
function GIb(a){var b;b=new LIb(a.d,a.e);b.b=a.b;return b}
function p1b(a,b){a.d=b.b[12];a.e=b.b[13];a.c=b.b[14];return a}
function HLb(a,b){!b&&(b=new JLb);dLb(a,b);f_b(b.q,a.q);f_b(b.r,a.r);return b}
function _Lb(a){var b;b=new fMb;HLb(a,b);cMb(b,a.d);aMb(b,a.b);dMb(b,a.i);bMb(b,a.c);f_b(b.r,a.r);return b}
function N_b(a,b,c){var d,e;e=f1b(J_b.vf(a.c),c);d=O_b(a,K_b);g1b(d,b);a.c.vf(e);a.b=-j1b(d,a.c);return a}
function k1b(a,b){var c;c=new s1b;return a.Bf(c.vf(b).xf(2*(a.d*b.d+a.e*b.e+a.c*b.c)))}
function aqc(a){var b;a.r&&krc(a);a.r=true;b=a;while(b.ab){b=b.ab}!!b&&Fu(b,247)&&lDb(a.w,Cu(b,247),a.s,a.C,true)}
function $3b(a){var b,c,d;b=new frb;for(d=FOb((new sOb(a)).b.b).gc();d.Ic();){c=Cu(d.Jc(),1);Gmb(b,c,GIb(Cu(a.b[FFc+c],168)))}return b}
function dLb(a,b){var c,d;b._=a._;b.hb.vf(a.hb);b.bb.vf(a.bb);b.eb.vf(a.eb);b.P=a.P;b.gb.vf(a.gb);b.db=a.db;b.fb=a.fb;f_b(b.W,a.W);f_b(b.Z,a.Z);f_b(b.Y,a.Y);b.X=a.X;b.$=a.$;W_b(b.cb,a.cb);b.ib=a.ib;b.kb=a.kb;b.R=a.R;b.T=a.T;b.S=a.S;for(d=0;d<a.O.c;d++){c=Cu(tob(a.O,d),238);cLb(b,c.Xd())}return b}
function lrc(a){JIb(Cu(TNb(lVb(a.q).j,WKc),168),a.C);JIb(Cu(TNb(lVb(a.q).j,XKc),168),a.D);JIb(Cu(TNb(lVb(a.q).j,YKc),168),new Ohb(a.b));JIb(Cu(TNb(lVb(a.q).j,KKc),168),new Ohb(0));JIb(Cu(TNb(lVb(a.q).j,ZKc),168),a.e);JIb(Cu(TNb(lVb(a.q).j,$Kc),168),a.f);JIb(Cu(TNb(lVb(a.q).j,_Kc),168),a.i);JIb(Cu(TNb(lVb(a.q).j,aLc),168),a.g);JIb(Cu(TNb(lVb(a.q).j,bLc),168),new Ohb(20));JIb(Cu(TNb(lVb(a.q).j,VKc),168),a.c);XKb(su(KQ,eDc,0,[lVb(a.q).j]));if(!S$b(a.j)||!S$b(a.d)){a.C.s=false;a.B.s=false}krc(a);aqc(a)}
function mrc(a,b){bLb();var c;sLb.call(this);new I$b(8355711);this.t=new T_b;this.v=new t1b(0,0,1);this.u=new s1b;this.n=new s1b;this.A=new G_b;this.p=new t1b(0,0,-1);this.o=new d2b;this.D=new G_b;iLb(this,'mirror_ '+this.Q);this.j=512;this.d=512;this.b=1;this.e=null;this.g=new t1b(0.70707,0.70707,0);this.f=new I$b(16777215);this.i=new I$b(8355711);this.c=new t1b(0,0,0);iLb(this,'water_'+this.Q);this.w=a;if(b){this.k=b}else{this.k=new fMb;ZKb(' -> Mirror() ID '+this._+': camera is not a Perspective Camera!')}this.D=new G_b;this.s=_Lb(this.k);this.C=new fKb(this.j,this.d);this.B=new fKb(this.j,this.d);c=new orc;$3b(c.j);this.q=new YZb(c);xVb(this.q,true)}
function krc(a){var b,c,d,e,f,g;rLb(a,false);rLb(a.k,false);p1b(a.u,a.Z);p1b(a.n,a.k.Z);i_b(a.A,a.Z);m1b(a.v,0,0,1);g1b(a.v,a.A);f=a.u.uf().Bf(a.n);k1b(f,a.v).yf();f.tf(a.u);i_b(a.A,a.k.Z);m1b(a.p,0,0,-1);g1b(a.p,a.A);a.p.tf(a.n);e=a.u.uf().Bf(a.p);k1b(e,a.v).yf();e.tf(a.u);m1b(a.hb,0,-1,0);g1b(a.hb,a.A);k1b(a.hb,a.v).yf();a.s.bb.vf(f);kLb(a.s,a.hb);ILb(a.s,e);aMb(a.s,a.k.b);eMb(a.s);rLb(a.s,false);l_b(a.s.q,a.s.Z);C_b(a.D,0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);w_b(a.D,a.s.r);w_b(a.D,a.s.q);S_b(a.t,a.v,a.u);M_b(a.t,a.s.q);a2b(a.o,a.t.c.d,a.t.c.e,a.t.c.c,a.t.b);d=new d2b;c=a.s.r;I0b(d,(jrc(a.o.d)+c.b[8])/c.b[0]);J0b(d,(jrc(a.o.e)+c.b[9])/c.b[5]);d.c=-1;b2b(d,(1+c.b[10])/c.b[14]);new d2b;b=_1b(a.o,2/$1b(a.o,d));rxb(c.b,2,b.d);rxb(c.b,6,b.e);rxb(c.b,10,b.c+1);rxb(c.b,14,b.b);g=new s1b;p1b(g,a.k.Z);a.c=g;JIb(Cu(TNb(lVb(a.q).j,VKc),168),a.c)}
var YKc='alpha',bLc='distortionScale',VKc='eye',WKc='mirrorSampler',ZKc='normalSampler',$Kc='sunColor',aLc='sunDirection',XKc='textureMatrix',_Kc='waterColor';PS(786,1,pEc);_.Xd=function tLb(){return this.Yd()};_.Yd=function uLb(){return dLb(this,new sLb)};PS(789,785,qEc,fMb);_.Xd=function hMb(){return _Lb(this)};_.Yd=function iMb(){return _Lb(this)};PS(911,910,{233:1,234:1,236:1});_.yf=function L1b(){return this.xf(-1)};PS(912,911,{233:1,234:1,236:1,237:1});_.yf=function r2b(){return _1b(this,-1)};PS(1148,1,zEc);_.Gb=function Sjc(){C4b(this.c,new Ujc(this.b))};PS(1149,934,wEc,Ujc);_.Ld=function Vjc(a){};_.rb=function Wjc(){var a,b,c,d,e,f,g,i,j,k,n;qt((zvb(),yvb),(Jvb(),Ivb),this);this.b=new gMb(55,gDb(this.H.o),0.5,3000000);m1b(this.b.bb,2000,750,2000);this.c=new $tb(this.b,this.H.c);this.c.r=500;this.c.f=0.1;d=new DUb(16777147,526368,1);m1b(d.bb,-1,1,-1);cLb(this.I,d);this.f=new mrc(this.H.o,this.b);this.f.j=512;this.f.d=512;this.f.b=1;this.f.g=d.bb.uf().zf();this.f.f=new I$b(16777215);this.f.i=new I$b(7695);n=new JJb('./static/textures/waternormals.jpg',new Zjc(this));CJb(n,(GCb(),FCb));DJb(n,FCb);g=new O2b(new tSb(1000000,1000000),this.f.q);cLb(g,this.f);I0b(g.eb,-1.5707963267948966);cLb(this.I,g);k=new RJb(zKc);e=new sXb;nXb(e,new I$b(16777215));e.d=k;i=new YZb(new cFb);JIb(Cu(TNb(lVb(i).j,xKc),168),k);i.R=false;wVb(i,(jXb(),gXb));f=new O2b(new TRb(1000000,1000000,1000000),i);cLb(this.I,f);a=new fSb(400,4);for(b=0,c=a.o.Xc();b<c;b++){F$b(Cu(a.o.Pc(b),180).j,Ku(1118481+Pib(Vib()*15658735)))}j=new aZb;$Yb(j,(eWb(),bWb));j.D=100;this.e=new O2b(a,j)};_.sb=function Xjc(a){var b;b=xh()*0.001;J0b(this.e.bb,Xib(b)*500+250);J0b(this.e.eb,b*0.5);q1b(this.e.eb,b*0.51);JIb(Cu(TNb(lVb(this.f.q).j,KKc),168),new Ohb(Cu(Cu(TNb(lVb(this.f.q).j,KKc),168).e,98).b+0.016666666666666666));aqc(this.f);Ztb(this.c,(xh()-this.d)*0.001);this.d=xh();lDb(this.H.o,this.I,this.b,null,false);XKb(su(KQ,eDc,0,[this.b.bb,this.b.eb,this.b.W]))};_.d=0;PS(1150,1,{},Zjc);_.Wd=function $jc(a){this.b.f.e=a;lrc(this.b.f)};PS(1261,786,pEc);_.r=false;PS(1280,1261,pEc,mrc);_.b=0;_.d=0;_.j=0;PS(1281,703,nEc,orc);_.Od=function prc(){qEb(this,ZKc,new LIb((cJb(),WIb),null));qEb(this,WKc,new LIb(WIb,null));qEb(this,YKc,new LIb(QIb,new Ohb(1)));qEb(this,KKc,new LIb(QIb,new Ohb(0)));qEb(this,bLc,new LIb(QIb,new Ohb(20)));qEb(this,XKc,new LIb(UIb,new G_b));qEb(this,$Kc,new LIb(PIb,new I$b(8355711)));qEb(this,aLc,new LIb($Ib,new t1b(0.70707,0.70707,0)));qEb(this,VKc,new LIb($Ib,new t1b(0,0,0)));qEb(this,_Kc,new LIb(PIb,new I$b(5592405)))};var qrc;PS(1282,1,{},wrc);_.Rd=function xrc(){return Frc(),urc};_.Sd=function yrc(){return Grc(),vrc};var urc,vrc;PS(1283,1,{},Arc);_.ic=function Brc(){return '\t\r\nuniform sampler2D mirrorSampler;\r\nuniform float alpha;\r\nuniform float time;\r\nuniform float distortionScale;\r\nuniform sampler2D normalSampler;\r\nuniform vec3 sunColor;\r\nuniform vec3 sunDirection;\r\nuniform vec3 eye;\r\nuniform vec3 waterColor;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvec4 getNoise( vec2 uv )\r\n{\r\n\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\r\n\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\r\n\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\r\n\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\r\n\tvec4 noise = ( texture2D( normalSampler, uv0 ) ) +\r\n        \t\t( texture2D( normalSampler, uv1 ) ) +\r\n        \t\t( texture2D( normalSampler, uv2 ) ) +\r\n\t\t( texture2D( normalSampler, uv3 ) );\r\n\treturn noise * 0.5 - 1.0;\r\n}\r\n\t\t\r\nvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\r\n{\r\n\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\r\n\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\r\n\tspecularColor += pow( direction, shiny ) * sunColor * spec;\r\n\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\r\n}\r\n\t\t\r\nvoid main()\r\n{\r\n\tvec4 noise = getNoise( worldPosition.xz );\r\n\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\r\n\r\n\tvec3 diffuseLight = vec3(0.0);\r\n\tvec3 specularLight = vec3(0.0);\r\n\r\n\tvec3 worldToEye = eye-worldPosition;\r\n\tvec3 eyeDirection = normalize( worldToEye );\r\n\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\r\n\t\t\r\n\tfloat distance = length(worldToEye);\r\n\r\n\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\r\n\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\r\n\r\n\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\r\n\tfloat rf0 = 0.3;\r\n\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\r\n\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\r\n\tvec3 albedo = mix( sunColor * diffuseLight * 0.3 + scatter, ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance );\r\n\tgl_FragColor = vec4( albedo, alpha );\r\n}\r\n'};PS(1284,1,{},Drc);_.ic=function Erc(){return 'uniform mat4 textureMatrix;\r\nuniform float time;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvoid main()\r\n{\r\n\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\r\n\tworldPosition = mirrorCoord.xyz;\r\n\tmirrorCoord = textureMatrix * mirrorCoord;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n'};var _M=Chb(nJc,'ShaderOcean$DemoScene',1149),$M=Chb(nJc,'ShaderOcean$DemoScene$1',1150),_N=Chb(gJc,'Mirror',1261),qO=Chb(gJc,'Water',1280),pO=Chb(gJc,'WaterShader',1281),oO=Chb(gJc,'WaterShader_Resources_default_InlineClientBundleGenerator',1282),mO=Chb(gJc,'WaterShader_Resources_default_InlineClientBundleGenerator$1',1283),nO=Chb(gJc,'WaterShader_Resources_default_InlineClientBundleGenerator$2',1284);MEc(Di)(36);