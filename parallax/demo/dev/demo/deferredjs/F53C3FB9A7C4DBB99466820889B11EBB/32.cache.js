function sxc(){}
function wxc(){}
function zxc(){}
function MPb(a,b){a.$=b}
function Q7b(a,b){a.b=b}
function PPb(a,b){a.gb=b}
function wpc(a){this.b=a}
function rpc(){xac.call(this)}
function GZb(){HZb.call(this,0,0,1)}
function S7b(){T7b.call(this,0,0,0,1)}
function lxc(){VIb.call(this,(oxc(),nxc))}
function oxc(){oxc=iLc;nxc=new sxc}
function Bxc(){Bxc=iLc;qxc=new wxc}
function Cxc(){Cxc=iLc;rxc=new zxc}
function K4b(a){return a<0?-1:a>0?1:0}
function N7b(a,b){return a.d*b.d+a.e*b.e+a.c*b.c+a.b*b.b}
function eNb(a){var b;b=new jNb(a.d,a.e);b.b=a.b;return b}
function x5b(a,b,c){a.c.qf(b);a.b=-U6b(c,a.c);return a}
function s5b(a,b){var c;c=new S4b;return t5b(a,b,(R4b(O4b(c,b)),c))}
function Z6b(a,b){var c;c=new e7b;return a.xf(c.qf(b).tf(2*(a.d*b.d+a.e*b.e+a.c*b.c)))}
function HZb(a,b,c){EPb();WYb.call(this,a);this.b=new k4b(b);this.ab=new f7b(0,100,0);this.c=c}
function $vc(a){var b;a.r&&hxc(a);a.r=true;b=a;while(b._){b=b._}!!b&&Hu(b,309)&&iHb(a.w,Eu(b,309),a.s,a.C,true)}
function u9b(a){var b,c,d;b=new Ctb;for(d=ZSb((new MSb(a)).b.b).cc();d.Ec();){c=Eu(d.Fc(),1);Zob(b,c,eNb(Eu(a.b[bOc+c],225)))}return b}
function t5b(a,b,c){var d,e,f,g;f=new e7b;g=new e7b;e=N6b(f.qf(a.c),c);d=g.qf(a.c).tf(-a.b);O6b(d,b);a.c.qf(e);a.b=-U6b(d,a.c);return a}
function _4b(a,b){var c,d,e,f,g;c=b.b;g=new e7b;d=1/_6b(g,c[0],c[1],c[2]).df();e=1/_6b(g,c[4],c[5],c[6]).df();f=1/_6b(g,c[8],c[9],c[10]).df();a.b[0]=c[0]*d;a.b[1]=c[1]*d;a.b[2]=c[2]*d;a.b[4]=c[4]*e;a.b[5]=c[5]*e;a.b[6]=c[6]*e;a.b[8]=c[8]*f;a.b[9]=c[9]*f;a.b[10]=c[10]*f;return a}
function ixc(a){hNb(Eu(lSb(n$b(a.q).j,zTc),225),a.C);hNb(Eu(lSb(n$b(a.q).j,ATc),225),a.D);hNb(Eu(lSb(n$b(a.q).j,BTc),225),new dkb(a.b));hNb(Eu(lSb(n$b(a.q).j,nTc),225),new dkb(0));hNb(Eu(lSb(n$b(a.q).j,CTc),225),a.e);hNb(Eu(lSb(n$b(a.q).j,DTc),225),a.f);hNb(Eu(lSb(n$b(a.q).j,ETc),225),a.i);hNb(Eu(lSb(n$b(a.q).j,FTc),225),a.g);hNb(Eu(lSb(n$b(a.q).j,GTc),225),new dkb(20));hNb(Eu(lSb(n$b(a.q).j,yTc),225),a.c);xPb(uu(qS,oLc,0,[n$b(a.q).j]));if(!J4b(a.j)||!J4b(a.d)){TNb(a.C,false);TNb(a.B,false)}hxc(a);$vc(a)}
function jxc(a,b){EPb();var c;XPb.call(this);new k4b(8355711);this.t=new y5b;this.v=new f7b(0,0,1);this.u=new e7b;this.n=new e7b;this.A=new o5b;this.p=new f7b(0,0,-1);this.o=new S7b;this.D=new o5b;MPb(this,'mirror_ '+this.S);this.j=512;this.d=512;this.b=1;this.e=null;this.g=new f7b(0.70707,0.70707,0);this.f=new k4b(16777215);this.i=new k4b(8355711);this.c=new f7b(0,0,0);MPb(this,'water_'+this.S);this.w=a;if(b){this.k=b}else{this.k=new HQb;zPb(' -> Mirror() ID '+this.$+': camera is not a Perspective Camera!')}this.D=new o5b;this.s=BQb(this.k);this.C=new FOb(this.j,this.d);this.B=new FOb(this.j,this.d);c=new lxc;u9b(c.j);this.q=new v3b(c);z$b(this.q,true)}
function hxc(a){var b,c,d,e,f,g;WPb(a,false);WPb(a.k,false);a7b(a.u,a.Y);a7b(a.n,a.k.Y);_4b(a.A,a.Y);_6b(a.v,0,0,1);O6b(a.v,a.A);f=a.u.pf().xf(a.n);Z6b(f,a.v).uf();f.of(a.u);_4b(a.A,a.k.Y);_6b(a.p,0,0,-1);O6b(a.p,a.A);a.p.of(a.n);e=a.u.pf().xf(a.p);Z6b(e,a.v).uf();e.of(a.u);_6b(a.gb,0,-1,0);O6b(a.gb,a.A);Z6b(a.gb,a.v).uf();a.s.ab.qf(f);PPb(a.s,a.gb);cQb(a.s,e);CQb(a.s,a.k.b);GQb(a.s);WPb(a.s,false);b5b(a.s.p,a.s.Y);n5b(a.D,0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);l5b(a.D,a.s.q);l5b(a.D,a.s.p);x5b(a.t,a.v,a.u);s5b(a.t,a.s.p);P7b(a.o,a.t.c.d,a.t.c.e,a.t.c.c,a.t.b);d=new S7b;c=a.s.q;o6b(d,(K4b(a.o.d)+c.b[8])/c.b[0]);p6b(d,(K4b(a.o.e)+c.b[9])/c.b[5]);d.c=-1;Q7b(d,(1+c.b[10])/c.b[14]);new S7b;b=O7b(a.o,2/N7b(a.o,d));Xzb(c.b,2,b.d);Xzb(c.b,6,b.e);Xzb(c.b,10,b.c+1);Xzb(c.b,14,b.b);g=new e7b;a7b(g,a.k.Y);a.c=g;hNb(Eu(lSb(n$b(a.q).j,yTc),225),a.c)}
var BTc='alpha',GTc='distortionScale',yTc='eye',zTc='mirrorSampler',CTc='normalSampler',FTc='sunDirection',ATc='textureMatrix',ETc='waterColor';xU(908,903,{249:1,259:1,260:1},GZb,HZb);_.Yd=function IZb(){var a;return a=new GZb,GPb(this,a,true),_3b(a.M,this.M),_3b(a.b,this.b),a.c=this.c,a};_.pe=function JZb(a,b){var c,d,e,f,g,i,j,k;i=a.d.d;e=a.d.b;g=a.d.c;k=this.M;d=this.b;j=this.c;f=i.length*3;if(b){UYb(i,f,k,j);UYb(e,f,d,j)}else{VYb(i,f,k,j);VYb(e,f,d,j)}c=new e7b;a7b(c,this.Y);c.vf();Xzb(g,f,c.d);Xzb(g,f+1,c.e);Xzb(g,f+2,c.c)};_.c=0;xU(945,944,{296:1,297:1,299:1});_.uf=function z7b(){this.d=-this.d;this.e=-this.e;this.c=-this.c;return this};xU(946,945,{296:1,297:1,299:1,301:1},S7b);_.uf=function e8b(){return this.d=-this.d,this.e=-this.e,this.c=-this.c,this.b=-this.b,this};xU(1192,1,WMc);_.Db=function ppc(){Z9b(this.c,new rpc(this.b))};xU(1193,974,TMc,rpc);_.Jd=function spc(a){};_.ob=function tpc(){var a,b,c,d,e,f,g,i,j,k,n;tt(($xb(),Zxb),(iyb(),hyb),this);this.b=new IQb(55,YGb(this.H.n),0.5,3000000);_6b(this.b.ab,2000,750,2000);this.c=new Awb(this.b,this.H.d);this.c.r=500;this.c.f=0.1;d=new HZb(16777147,526368,1);_6b(d.ab,-1,1,-1);FPb(this.I,d);this.f=new jxc(this.H.n,this.b);this.f.j=512;this.f.d=512;this.f.b=1;this.f.g=d.ab.pf().vf();this.f.f=new k4b(16777215);this.f.i=new k4b(7695);n=new jOb('./static/textures/waternormals.jpg',new wpc(this));cOb(n,(_Fb(),$Fb));dOb(n,$Fb);g=new FYb(new ZWb(1000000,1000000),this.f.q);FPb(g,this.f);x4b(g.db,-1.5707963267948966);FPb(this.I,g);k=new rOb(cTc);e=new u0b;o0b(e,new k4b(16777215));e.e=k;i=new v3b(new vJb);hNb(Eu(lSb(n$b(i).j,_Sc),225),k);i.T=false;y$b(i,(k0b(),h0b));f=new FYb(new tWb(1000000,1000000,1000000),i);FPb(this.I,f);a=new MWb(400,4);for(b=0,c=a.j.Tc();b<c;b++){h4b(Eu(a.j.Lc(b),241).g,Mu(1118481+elb(klb()*15658735)))}j=new r2b;p2b(j,(f_b(),c_b));j.j=k;j.G=100;this.e=new FYb(a,j)};_.pb=function upc(a){var b;b=Bh()*0.001;p6b(this.e.ab,mlb(b)*500+250);y4b(this.e.db,b*0.5);z4b(this.e.db,b*0.51);hNb(Eu(lSb(n$b(this.f.q).j,nTc),225),new dkb(Eu(Eu(lSb(n$b(this.f.q).j,nTc),225).e,150).b+0.016666666666666666));$vc(this.f);zwb(this.c,(Bh()-this.d)*0.001);this.d=Bh();iHb(this.H.n,this.I,this.b,null,false);xPb(uu(qS,oLc,0,[this.b.ab,this.b.db,this.b.W]))};_.d=0;xU(1194,1,{},wpc);_.Xd=function xpc(a){this.b.f.e=a;ixc(this.b.f)};xU(1297,809,KMc);_.r=false;xU(1316,1297,KMc,jxc);_.b=0;_.d=0;_.j=0;xU(1317,726,IMc,lxc);_.Od=function mxc(){JIb(this,CTc,new jNb((CNb(),uNb),null));JIb(this,zTc,new jNb(uNb,null));JIb(this,BTc,new jNb(oNb,new dkb(1)));JIb(this,nTc,new jNb(oNb,new dkb(0)));JIb(this,GTc,new jNb(oNb,new dkb(20)));JIb(this,ATc,new jNb(sNb,new o5b));JIb(this,DTc,new jNb(nNb,new k4b(8355711)));JIb(this,FTc,new jNb(yNb,new f7b(0.70707,0.70707,0)));JIb(this,yTc,new jNb(yNb,new f7b(0,0,0)));JIb(this,ETc,new jNb(nNb,new k4b(5592405)))};var nxc;xU(1318,1,{},sxc);_.Rd=function txc(){return Bxc(),qxc};_.Sd=function uxc(){return Cxc(),rxc};var qxc,rxc;xU(1319,1,{},wxc);_.qc=function xxc(){return '\t\r\nuniform sampler2D mirrorSampler;\r\nuniform float alpha;\r\nuniform float time;\r\nuniform float distortionScale;\r\nuniform sampler2D normalSampler;\r\nuniform vec3 sunColor;\r\nuniform vec3 sunDirection;\r\nuniform vec3 eye;\r\nuniform vec3 waterColor;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvec4 getNoise( vec2 uv )\r\n{\r\n\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\r\n\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\r\n\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\r\n\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\r\n\tvec4 noise = ( texture2D( normalSampler, uv0 ) ) +\r\n        \t\t( texture2D( normalSampler, uv1 ) ) +\r\n        \t\t( texture2D( normalSampler, uv2 ) ) +\r\n\t\t( texture2D( normalSampler, uv3 ) );\r\n\treturn noise * 0.5 - 1.0;\r\n}\r\n\t\t\r\nvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\r\n{\r\n\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\r\n\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\r\n\tspecularColor += pow( direction, shiny ) * sunColor * spec;\r\n\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\r\n}\r\n\t\t\r\nvoid main()\r\n{\r\n\tvec4 noise = getNoise( worldPosition.xz );\r\n\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\r\n\r\n\tvec3 diffuseLight = vec3(0.0);\r\n\tvec3 specularLight = vec3(0.0);\r\n\r\n\tvec3 worldToEye = eye-worldPosition;\r\n\tvec3 eyeDirection = normalize( worldToEye );\r\n\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\r\n\t\t\r\n\tfloat distance = length(worldToEye);\r\n\r\n\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\r\n\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\r\n\r\n\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\r\n\tfloat rf0 = 0.3;\r\n\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\r\n\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\r\n\tvec3 albedo = mix( sunColor * diffuseLight * 0.3 + scatter, ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance );\r\n\tgl_FragColor = vec4( albedo, alpha );\r\n}\r\n'};xU(1320,1,{},zxc);_.qc=function Axc(){return 'uniform mat4 textureMatrix;\r\nuniform float time;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvoid main()\r\n{\r\n\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\r\n\tworldPosition = mirrorCoord.xyz;\r\n\tmirrorCoord = textureMatrix * mirrorCoord;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n'};var LN=Tjb(URc,'ShaderOcean$DemoScene',1193),KN=Tjb(URc,'ShaderOcean$DemoScene$1',1194),jP=Tjb(NRc,'Mirror',1297),AP=Tjb(NRc,'Water',1316),OI=Tjb(HTc,'HemisphereLight',908),zP=Tjb(NRc,'WaterShader',1317),yP=Tjb(NRc,'WaterShader_Resources_default_InlineClientBundleGenerator',1318),wP=Tjb(NRc,'WaterShader_Resources_default_InlineClientBundleGenerator$1',1319),xP=Tjb(NRc,'WaterShader_Resources_default_InlineClientBundleGenerator$2',1320);iNc(Hi)(32);