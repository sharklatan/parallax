function uzc(){}
function yzc(){}
function Bzc(){}
function RPb(a,b){a.$=b}
function k7b(a,b){a.b=b}
function UPb(a,b){a.gb=b}
function Npc(a){this.b=a}
function Ipc(){eac.call(this)}
function bZb(){cZb.call(this,0,0,1)}
function m7b(){n7b.call(this,0,0,0,1)}
function nzc(){$Ib.call(this,(qzc(),pzc))}
function Dzc(){Dzc=kNc;szc=new yzc}
function qzc(){qzc=kNc;pzc=new uzc}
function Ezc(){Ezc=kNc;tzc=new Bzc}
function e4b(a){return a<0?-1:a>0?1:0}
function h7b(a,b){return a.d*b.d+a.e*b.e+a.c*b.c+a.b*b.b}
function jNb(a){var b;b=new oNb(a.d,a.e);b.b=a.b;return b}
function T4b(a,b,c){a.c.sf(b);a.b=-o6b(c,a.c);return a}
function O4b(a,b){var c;c=new m4b;return P4b(a,b,(l4b(i4b(c,b)),c))}
function t6b(a,b){var c;c=new A6b;return a.zf(c.sf(b).vf(2*(a.d*b.d+a.e*b.e+a.c*b.c)))}
function cZb(a,b,c){JPb();rYb.call(this,a);this.b=new G3b(b);this.ab=new B6b(0,100,0);this.c=c}
function ayc(a){var b;a.r&&jzc(a);a.r=true;b=a;while(b._){b=b._}!!b&&Zu(b,309)&&nHb(a.w,Wu(b,309),a.s,a.C,true)}
function c9b(a){var b,c,d;b=new Jtb;for(d=_Sb((new OSb(a)).b.b).gc();d.Ic();){c=Wu(d.Jc(),1);fpb(b,c,jNb(Wu(a.b[dQc+c],225)))}return b}
function P4b(a,b,c){var d,e,f,g;f=new A6b;g=new A6b;e=h6b(f.sf(a.c),c);d=g.sf(a.c).vf(-a.b);i6b(d,b);a.c.sf(e);a.b=-o6b(d,a.c);return a}
function v4b(a,b){var c,d,e,f,g;c=b.b;g=new A6b;d=1/v6b(g,c[0],c[1],c[2]).ff();e=1/v6b(g,c[4],c[5],c[6]).ff();f=1/v6b(g,c[8],c[9],c[10]).ff();a.b[0]=c[0]*d;a.b[1]=c[1]*d;a.b[2]=c[2]*d;a.b[4]=c[4]*e;a.b[5]=c[5]*e;a.b[6]=c[6]*e;a.b[8]=c[8]*f;a.b[9]=c[9]*f;a.b[10]=c[10]*f;return a}
function kzc(a){mNb(Wu(nSb(KZb(a.q).j,CVc),225),a.C);mNb(Wu(nSb(KZb(a.q).j,DVc),225),a.D);mNb(Wu(nSb(KZb(a.q).j,EVc),225),new lkb(a.b));mNb(Wu(nSb(KZb(a.q).j,qVc),225),new lkb(0));mNb(Wu(nSb(KZb(a.q).j,FVc),225),a.e);mNb(Wu(nSb(KZb(a.q).j,GVc),225),a.f);mNb(Wu(nSb(KZb(a.q).j,HVc),225),a.i);mNb(Wu(nSb(KZb(a.q).j,IVc),225),a.g);mNb(Wu(nSb(KZb(a.q).j,JVc),225),new lkb(20));mNb(Wu(nSb(KZb(a.q).j,BVc),225),a.c);CPb(Mu(DS,qNc,0,[KZb(a.q).j]));if(!d4b(a.j)||!d4b(a.d)){YNb(a.C,false);YNb(a.B,false)}jzc(a);ayc(a)}
function lzc(a,b){JPb();var c;aQb.call(this);new G3b(8355711);this.t=new U4b;this.v=new B6b(0,0,1);this.u=new A6b;this.n=new A6b;this.A=new K4b;this.p=new B6b(0,0,-1);this.o=new m7b;this.D=new K4b;RPb(this,'mirror_ '+this.S);this.j=512;this.d=512;this.b=1;this.e=null;this.g=new B6b(0.70707,0.70707,0);this.f=new G3b(16777215);this.i=new G3b(8355711);this.c=new B6b(0,0,0);RPb(this,'water_'+this.S);this.w=a;if(b){this.k=b}else{this.k=new MQb;EPb(' -> Mirror() ID '+this.$+': camera is not a Perspective Camera!')}this.D=new K4b;this.s=GQb(this.k);this.C=new KOb(this.j,this.d);this.B=new KOb(this.j,this.d);c=new nzc;c9b(c.j);this.q=new S2b(c);WZb(this.q,true)}
function jzc(a){var b,c,d,e,f,g;_Pb(a,false);_Pb(a.k,false);w6b(a.u,a.Y);w6b(a.n,a.k.Y);v4b(a.A,a.Y);v6b(a.v,0,0,1);i6b(a.v,a.A);f=a.u.rf().zf(a.n);t6b(f,a.v).wf();f.qf(a.u);v4b(a.A,a.k.Y);v6b(a.p,0,0,-1);i6b(a.p,a.A);a.p.qf(a.n);e=a.u.rf().zf(a.p);t6b(e,a.v).wf();e.qf(a.u);v6b(a.gb,0,-1,0);i6b(a.gb,a.A);t6b(a.gb,a.v).wf();a.s.ab.sf(f);UPb(a.s,a.gb);hQb(a.s,e);HQb(a.s,a.k.b);LQb(a.s);_Pb(a.s,false);x4b(a.s.p,a.s.Y);J4b(a.D,0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1);H4b(a.D,a.s.q);H4b(a.D,a.s.p);T4b(a.t,a.v,a.u);O4b(a.t,a.s.p);j7b(a.o,a.t.c.d,a.t.c.e,a.t.c.c,a.t.b);d=new m7b;c=a.s.q;K5b(d,(e4b(a.o.d)+c.b[8])/c.b[0]);L5b(d,(e4b(a.o.e)+c.b[9])/c.b[5]);d.c=-1;k7b(d,(1+c.b[10])/c.b[14]);new m7b;b=i7b(a.o,2/h7b(a.o,d));cAb(c.b,2,b.d);cAb(c.b,6,b.e);cAb(c.b,10,b.c+1);cAb(c.b,14,b.b);g=new A6b;w6b(g,a.k.Y);a.c=g;mNb(Wu(nSb(KZb(a.q).j,BVc),225),a.c)}
var EVc='alpha',JVc='distortionScale',BVc='eye',CVc='mirrorSampler',FVc='normalSampler',IVc='sunDirection',DVc='textureMatrix',HVc='waterColor';JU(906,901,{249:1,259:1,260:1},bZb,cZb);_.ae=function dZb(){var a;return a=new bZb,LPb(this,a,true),w3b(a.M,this.M),w3b(a.b,this.b),a.c=this.c,a};_.re=function eZb(a,b){var c,d,e,f,g,i,j,k;i=a.d.d;e=a.d.b;g=a.d.c;k=this.M;d=this.b;j=this.c;f=i.length*3;if(b){pYb(i,f,k,j);pYb(e,f,d,j)}else{qYb(i,f,k,j);qYb(e,f,d,j)}c=new A6b;w6b(c,this.Y);c.xf();cAb(g,f,c.d);cAb(g,f+1,c.e);cAb(g,f+2,c.c)};_.c=0;JU(943,942,{296:1,297:1,299:1});_.wf=function V6b(){this.d=-this.d;this.e=-this.e;this.c=-this.c;return this};JU(944,943,{296:1,297:1,299:1,301:1},m7b);_.wf=function A7b(){return this.d=-this.d,this.e=-this.e,this.c=-this.c,this.b=-this.b,this};JU(1190,1,XOc);_.Db=function Gpc(){G9b(this.c,new Ipc(this.b))};JU(1191,973,UOc,Ipc);_.Nd=function Jpc(a){};_.ob=function Kpc(){var a,b,c,d,e,f,g,i,j,k,n;Lt((fyb(),eyb),(pyb(),oyb),this);this.b=new NQb(55,bHb(this.H.n),0.5,3000000);v6b(this.b.ab,2000,750,2000);this.c=new Hwb(this.b,this.H.d);this.c.r=500;this.c.f=0.1;d=new cZb(16777147,526368,1);v6b(d.ab,-1,1,-1);KPb(this.I,d);this.f=new lzc(this.H.n,this.b);this.f.j=512;this.f.d=512;this.f.b=1;this.f.g=d.ab.rf().xf();this.f.f=new G3b(16777215);this.f.i=new G3b(7695);n=new oOb('./static/textures/waternormals.jpg',new Npc(this));hOb(n,(eGb(),dGb));iOb(n,dGb);g=new Z7b(new _Wb(1000000,1000000),this.f.q);KPb(g,this.f);T3b(g.db,-1.5707963267948966);KPb(this.I,g);k=new wOb(fVc);e=new R_b;L_b(e,new G3b(16777215));e.e=k;i=new S2b(new AJb);mNb(Wu(nSb(KZb(i).j,cVc),225),k);i.T=false;VZb(i,(H_b(),E_b));f=new Z7b(new vWb(1000000,1000000,1000000),i);KPb(this.I,f);a=new OWb(400,4);for(b=0,c=a.j.Xc();b<c;b++){D3b(Wu(a.j.Pc(b),241).g,cv(1118481+mlb(slb()*15658735)))}j=new O1b;M1b(j,(C$b(),z$b));j.j=k;j.G=100;this.e=new Z7b(a,j)};_.pb=function Lpc(a){var b;b=Ch()*0.001;L5b(this.e.ab,ulb(b)*500+250);U3b(this.e.db,b*0.5);V3b(this.e.db,b*0.51);mNb(Wu(nSb(KZb(this.f.q).j,qVc),225),new lkb(Wu(Wu(nSb(KZb(this.f.q).j,qVc),225).e,150).b+0.016666666666666666));ayc(this.f);Gwb(this.c,(Ch()-this.d)*0.001);this.d=Ch();nHb(this.H.n,this.I,this.b,null,false);CPb(Mu(DS,qNc,0,[this.b.ab,this.b.db,this.b.W]))};_.d=0;JU(1192,1,{},Npc);_._d=function Opc(a){this.b.f.e=a;kzc(this.b.f)};JU(1339,814,MOc);_.r=false;JU(1358,1339,MOc,lzc);_.b=0;_.d=0;_.j=0;JU(1359,731,KOc,nzc);_.Sd=function ozc(){OIb(this,FVc,new oNb((HNb(),zNb),null));OIb(this,CVc,new oNb(zNb,null));OIb(this,EVc,new oNb(tNb,new lkb(1)));OIb(this,qVc,new oNb(tNb,new lkb(0)));OIb(this,JVc,new oNb(tNb,new lkb(20)));OIb(this,DVc,new oNb(xNb,new K4b));OIb(this,GVc,new oNb(sNb,new G3b(8355711)));OIb(this,IVc,new oNb(DNb,new B6b(0.70707,0.70707,0)));OIb(this,BVc,new oNb(DNb,new B6b(0,0,0)));OIb(this,HVc,new oNb(sNb,new G3b(5592405)))};var pzc;JU(1360,1,{},uzc);_.Vd=function vzc(){return Dzc(),szc};_.Wd=function wzc(){return Ezc(),tzc};var szc,tzc;JU(1361,1,{},yzc);_.uc=function zzc(){return '\t\r\nuniform sampler2D mirrorSampler;\r\nuniform float alpha;\r\nuniform float time;\r\nuniform float distortionScale;\r\nuniform sampler2D normalSampler;\r\nuniform vec3 sunColor;\r\nuniform vec3 sunDirection;\r\nuniform vec3 eye;\r\nuniform vec3 waterColor;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvec4 getNoise( vec2 uv )\r\n{\r\n\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\r\n\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\r\n\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\r\n\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\r\n\tvec4 noise = ( texture2D( normalSampler, uv0 ) ) +\r\n        \t\t( texture2D( normalSampler, uv1 ) ) +\r\n        \t\t( texture2D( normalSampler, uv2 ) ) +\r\n\t\t( texture2D( normalSampler, uv3 ) );\r\n\treturn noise * 0.5 - 1.0;\r\n}\r\n\t\t\r\nvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor )\r\n{\r\n\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\r\n\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\r\n\tspecularColor += pow( direction, shiny ) * sunColor * spec;\r\n\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\r\n}\r\n\t\t\r\nvoid main()\r\n{\r\n\tvec4 noise = getNoise( worldPosition.xz );\r\n\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\r\n\r\n\tvec3 diffuseLight = vec3(0.0);\r\n\tvec3 specularLight = vec3(0.0);\r\n\r\n\tvec3 worldToEye = eye-worldPosition;\r\n\tvec3 eyeDirection = normalize( worldToEye );\r\n\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\r\n\t\t\r\n\tfloat distance = length(worldToEye);\r\n\r\n\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\r\n\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );\r\n\r\n\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\r\n\tfloat rf0 = 0.3;\r\n\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\r\n\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\r\n\tvec3 albedo = mix( sunColor * diffuseLight * 0.3 + scatter, ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance );\r\n\tgl_FragColor = vec4( albedo, alpha );\r\n}\r\n'};JU(1362,1,{},Bzc);_.uc=function Czc(){return 'uniform mat4 textureMatrix;\r\nuniform float time;\r\n\r\nvarying vec4 mirrorCoord;\r\nvarying vec3 worldPosition;\r\n\t\t\r\nvoid main()\r\n{\r\n\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\r\n\tworldPosition = mirrorCoord.xyz;\r\n\tmirrorCoord = textureMatrix * mirrorCoord;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n}\r\n'};var aO=_jb(XTc,'ShaderOcean$DemoScene',1191),_N=_jb(XTc,'ShaderOcean$DemoScene$1',1192),wP=_jb(QTc,'Mirror',1339),NP=_jb(QTc,'Water',1358),eJ=_jb(KVc,'HemisphereLight',906),MP=_jb(QTc,'WaterShader',1359),LP=_jb(QTc,'WaterShader_Resources_default_InlineClientBundleGenerator',1360),JP=_jb(QTc,'WaterShader_Resources_default_InlineClientBundleGenerator$1',1361),KP=_jb(QTc,'WaterShader_Resources_default_InlineClientBundleGenerator$2',1362);jPc(Ii)(32);